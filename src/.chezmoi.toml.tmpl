# ~/.config/chezmoi/config.toml

{{/* # GitHub Codespaces clone the repository to a this directory */}}
{{- if (env "CODESPACES") -}}
sourceDir = "/workspaces/.codespaces/.persistedshare/dotfiles"
{{- end }}

encryption = "age"
[age]
  identity = "~/personal.age"
  recipient = "age1ql3z7hjy54pw3hyww5ayyfg7zqgvc7w3j2elw8zmrj2kg5sfn9aqmcac8p"

progress = true
verbose = true

{{- includeTemplate "cpu.toml.tmpl" . }}
{{- includeTemplate "machine.toml.tmpl" . }}

[data]
  ci = {{ env "CI" | not | not }}
  username = {{ .chezmoi.username | splitList `\` | last | quote }}

[data.github]
  username = {{ env "GITHUB_USER" | default "DariuszPorowski" | quote }}
  workspace = {{ env "GITHUB_WORKSPACE" | not | not }}

[onepassword]
  cache = true

{{ if lookPath "code" }}
[edit]
  command = "code"
  args = ["--wait"]

[diff]
  command = "code"
  args = ["--wait", "--diff"]

[merge]
  command = "code"
  args = ["--wait", "$MERGED"]
{{ end }}

[update]
  recurseSubmodules = true

{{ if lookPath "pwsh" }}
[interpreters.ps1]
  command = "pwsh"
  args = ["-NoLogo", "-NoProfile"]
{{ end }}
